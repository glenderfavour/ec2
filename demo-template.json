{
    "AWSTemplateFormatVersion": "2010-09-09",
        "Description": "my first cloudformation template",
        "Metadata": {
    
        },
        "Parameters": {
        "vpcCidr": {
            "Description": "cidr block for my vpc",
            "Type": "String",
            "Default": ""
        },

        
        "PubsubCIDR": {
            "Description": "cidr block for my public subnet",
            "Type": "String",
            "Default": ""
        },

        
        "PriSubCIDR": {
            "Description": "cidr block for my private subnet",
            "Type": "String",
            "Default": ""
        }
        
        
        
        
        },
        "Mappings": {
    
        },
        "Conditions": {
    
        },
        "Resources": {
        "bwvpc": {
          "Type": "AWS::EC2::VPC",
          "Properties": {
            "CidrBlock": 
            { "Ref": "vpcCidr" }
            ,
            "Tags": [
            { "Key": "Name", "Value":  "bwvpc" }
            ]
          }
        },
    
         
         "publicsubnet": {
           "Type": "AWS::EC2::Subnet",
           "Properties": {
             "AvailabilityZone": "ca-central-1a",
             "VpcId": 
             { "Ref": "bwvpc" }
             ,
             "CidrBlock": 
             { "Ref": "PubsubCIDR" },       
             "Tags": [
             { "Key": "Name", "Value":  "pubsubnet" }
             ]
           }
         },
    
         
         "priSubnet": {
           "Type": "AWS::EC2::Subnet",
           "Properties": {
             "AvailabilityZone": "ca-central-1b",
             "VpcId": 
             { "Ref": "bwvpc" },
             "CidrBlock": 
             { "Ref": "PriSubCIDR" }
             ,
             "Tags": [
             { "Key": "Name", "Value":  "priSubnet" }
             ]
           }
         },
         
    
         
         "vpcIgw": {
           "Type": "AWS::EC2::InternetGateway",
           "Properties": {
             "Tags": [
             { "Key": "Name", "Value":  "myIgw" }
             ]
           }
         },
         "AttachIgw": {
           "Type": "AWS::EC2::VPCGatewayAttachment",
           "Properties": {
             "VpcId": 
             { "Ref": "bwvpc" }
             ,
             "InternetGatewayId": { "Ref": "vpcIgw" }
           }
         },
    
         
         "IgwRT": {
           "Type": "AWS::EC2::RouteTable",
           "Properties": {
             "VpcId": 
             { "Ref": "bwvpc" },
             "Tags":[
             { "Key": "Name", "Value":  "pubRT" }
             ]
           }
         },
    
         
         "pubRoute": {
           "Type": "AWS::EC2::Route",
           "Properties": {
             "RouteTableId": 
             { "Ref": "IgwRT" },
             
             "DestinationCidrBlock": "0.0.0.0/0",
             "GatewayId": 
             { "Ref": "vpcIgw" }
             
           }
         },
    
         
         "pubSubRtAss": {
           "Type": "AWS::EC2::SubnetRouteTableAssociation",
           "Properties": {
             "SubnetId": 
             { "Ref": "publicsubnet" },
             "RouteTableId": 
             { "Ref": "IgwRT" }
             
           }
         },
    
         "myNgw" : {
          "Type" : "AWS::EC2::NatGateway",
          "Properties" : {
             "AllocationId" : { 
                 "Fn::GetAtt" : ["NATGatewayEIP", "AllocationId"] 
             },
             "SubnetId" : { 
                 "Ref" : "publicsubnet" 
             },
             "Tags" : [ 
                 {"Key" : "Name", "Value" : "myNgw" } 
             ]
            }
       },
       "NATGatewayEIP" : {
          "Type" : "AWS::EC2::EIP",
          "Properties" : {
             "Domain" : "vpc"
          }
       },
    
       
       "NgwRt": {
         "Type": "AWS::EC2::RouteTable",
         "Properties": {
           "VpcId": 
           { "Ref": "bwvpc" },
           "Tags": [
           { "Key": "Name", "Value":  "NgwRt" }
           ]
         }
       },
       
       "NgwRoute" : {
          "DependsOn": [ "myNgw" ],
          "Type" : "AWS::EC2::Route",
          "Properties" : {
             "RouteTableId" : { "Ref" : "NgwRt" },
             "DestinationCidrBlock" : "0.0.0.0/0",
             "NatGatewayId" : { "Ref" : "myNgw" }
          }
       },
    
       "priSubRtAss": {
        "Type": "AWS::EC2::SubnetRouteTableAssociation",
        "Properties": {
          "SubnetId": 
          { "Ref": "priSubnet" },
          "RouteTableId": 
          { "Ref": "NgwRt" }
          
        }
      }
    
        },
        "Outputs": {
    
        }
    }
    